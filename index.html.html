<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" type="image/png" href="icon.png">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¸æ¸¬é«˜é »å–®å­—é–ƒå¡ (æ¥µé€Ÿç™¼éŸ³ç‰ˆ)</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --card-front-bg: #2c3e50;
            --card-front-text: #ffffff;
            --card-back-bg: #ffffff;
            --card-back-text: #333333;
            --accent-color: #e74c3c;
            --btn-color: #3498db;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        .scene {
            width: 340px;
            height: 520px;
            perspective: 1000px;
            margin-bottom: 20px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-radius: 20px;
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .card__face--front {
            background-color: var(--card-front-bg);
            color: var(--card-front-text);
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .word-main {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 15px;
            color: #fff;
            line-height: 1.2;
        }

        .word-ipa {
            font-family: "Lucida Console", Monaco, monospace;
            font-size: 1.3rem;
            color: #bdc3c7;
            margin-bottom: 5px;
        }

        .word-pos {
            font-style: italic;
            font-size: 1.1rem;
            color: #95a5a6;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            padding: 2px 10px;
            border-radius: 10px;
        }

        .btn-speak-front {
            background-color: var(--btn-color);
            border: none;
            border-radius: 50%;
            width: 64px;
            height: 64px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s, background-color 0.2s;
            margin-top: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            -webkit-tap-highlight-color: transparent;
        }
        
        .btn-speak-front:active {
            transform: scale(0.95);
            background-color: #2980b9;
        }

        .btn-speak-front svg {
            fill: white;
            width: 32px;
            height: 32px;
        }

        .hint-text {
            position: absolute;
            bottom: 20px;
            color: rgba(255,255,255,0.4);
            font-size: 0.85rem;
        }

        .card__face--back {
            background-color: var(--card-back-bg);
            color: var(--card-back-text);
            transform: rotateY(180deg);
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        .back-content {
            padding: 20px 25px;
            overflow-y: auto;
            flex-grow: 1;
            text-align: left;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .tag-header {
            color: var(--btn-color);
            font-weight: bold;
            display: block;
            margin-top: 12px;
            margin-bottom: 4px;
            font-size: 1rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 2px;
        }
        
        .tag-header:first-of-type {
            margin-top: 0;
        }

        .example-block {
            background-color: #f8f9fa;
            border-left: 4px solid var(--accent-color);
            padding: 10px 40px 10px 12px;
            margin: 8px 0;
            position: relative;
            border-radius: 0 8px 8px 0;
            font-style: italic;
            color: #555;
        }

        .btn-speak-sentence {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-speak-sentence:hover {
            background-color: #eee;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            align-items: center;
        }

        .nav-btn {
            background-color: white;
            border: 1px solid #ddd;
            padding: 10px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            color: #555;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.2s;
            user-select: none;
        }

        .nav-btn:hover {
            background-color: var(--btn-color);
            color: white;
            border-color: var(--btn-color);
        }
        
        .nav-btn:active {
            transform: translateY(2px);
        }

        .progress {
            margin-top: 15px;
            font-size: 1rem;
            color: #666;
            font-variant-numeric: tabular-nums;
        }

        .back-content::-webkit-scrollbar {
            width: 6px;
        }
        .back-content::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        .back-content::-webkit-scrollbar-thumb {
            background: #ccc; 
            border-radius: 3px;
        }
    </style>
</head>
<body>

    <div class="scene">
        <div class="card" id="flashcard">
            <!-- æ­£é¢ -->
            <div class="card__face card__face--front">
                <div id="front-word" class="word-main">Loading...</div>
                <div id="front-ipa" class="word-ipa"></div>
                <div id="front-pos" class="word-pos"></div>
                
                <button class="btn-speak-front" id="btn-speak-word" title="ç™¼éŸ³">
                    <!-- Speaker Icon -->
                    <svg viewBox="0 0 24 24">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                </button>
                
                <div class="hint-text">é»æ“Šå¡ç‰‡æŸ¥çœ‹è§£æ</div>
            </div>

            <!-- èƒŒé¢ -->
            <div class="card__face card__face--back">
                <div class="back-content" id="back-content">
                    <!-- å…§å®¹ç”± JS å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="nav-btn" id="prev-btn">â† ä¸Šä¸€å€‹</button>
        <span class="progress" id="progress-text">0 / 0</span>
        <button class="nav-btn" id="next-btn">ä¸‹ä¸€å€‹ â†’</button>
    </div>

<script>
// --- 1. CSV Data (50 words) ---
const csvData = `mischievous [ËˆmÉªstÊƒÉªvÉ™s] (adj.),"ã€ä¸­æ–‡ã€‘æ·˜æ°£çš„ã€æ„›æƒ¡ä½œåŠ‡çš„
ã€è©æ€§è®ŠåŒ–ã€‘
- mischief (n.)
ã€å­¸æ¸¬é»æ’¥ã€‘
- æ³¨æ„è®€éŸ³åªæœ‰ä¸‰å€‹éŸ³ç¯€ã€‚
ã€ä¾‹å¥ã€‘
He raised his mischievous green eyes toward the ceiling of Dink's bedroom.
(ä»–æœè‘— Dink è‡¥å®¤çš„å¤©èŠ±æ¿æšèµ·ä»–é‚£é›™æ·˜æ°£çš„ç¶ çœ¼ç›ã€‚)"
loyal [ËˆlÉ”ÉªÉ™l] (adj.),"ã€ä¸­æ–‡ã€‘å¿ å¯¦çš„ã€å¿ èª çš„
ã€è©æ€§è®ŠåŒ–ã€‘
- loyalty (n.)
ã€æ­é…è©ã€‘
- be loyal to...
ã€ä¾‹å¥ã€‘
I'm so happy to finally meet one of my most loyal fans.
(æˆ‘å¾ˆé«˜èˆˆçµ‚æ–¼èƒ½è¦‹åˆ°æˆ‘æœ€å¿ å¯¦çš„æ›¸è¿·ä¹‹ä¸€ã€‚)"
restless [ËˆrÉ›stlÉªs] (adj.),"ã€ä¸­æ–‡ã€‘ç„¦èºä¸å®‰çš„
ã€å­¸æ¸¬é»æ’¥ã€‘
- -less æ˜¯å¦å®šå­—å°¾ã€‚
- å½¢å®¹å› ç„¡èŠæˆ–æœŸå¾…è€Œåç«‹é›£å®‰ã€‚
ã€ä¾‹å¥ã€‘
Some of the kids started getting restless.
(æœ‰äº›å­©å­é–‹å§‹è®Šå¾—ç„¦èºä¸å®‰ã€‚)"
peculiar [pÉªËˆkjuljÉš] (adj.),"ã€ä¸­æ–‡ã€‘å¥‡æ€ªçš„ã€ç‰¹æ®Šçš„
ã€å­¸æ¸¬é»æ’¥ã€‘
- å­¸æ¸¬é–±è®€å¸¸å‡ºç¾ï¼Œå¯ç”¨ä¾†ä»£æ› odd æˆ– strangeã€‚
ã€ä¾‹å¥ã€‘
He said something very peculiar in his letter.
(ä»–åœ¨ä¿¡ä¸­èªªäº†ä¸€äº›éå¸¸å¥‡æ€ªçš„è©±ã€‚)"
ransom [ËˆrÃ¦nsÉ™m] (n.),"ã€ä¸­æ–‡ã€‘è´–é‡‘
ã€æ­é…è©ã€‘
- hold someone for ransom
ã€ä¾‹å¥ã€‘
Maybe someone kidnapped him for a ransom!
(æˆ–è¨±æœ‰äººç¶æ¶ä»–æ˜¯ç‚ºäº†è´–é‡‘ï¼)"
itinerary [aÉªËˆtÉªnÉ™ËŒrÉ›ri] (n.),"ã€ä¸­æ–‡ã€‘è¡Œç¨‹è¡¨ã€æ—…è¡Œè·¯ç·š
ã€å­¸æ¸¬é»æ’¥ã€‘
- ç”Ÿæ´»åŒ–è€ƒé¡Œï¼ˆæ—…éŠæƒ…å¢ƒï¼‰çš„é«˜é »ç‡å–®å­—ã€‚
ã€ä¾‹å¥ã€‘
All I have is his itinerary.
(æˆ‘æœ‰çš„å°±åªæœ‰ä»–çš„è¡Œç¨‹è¡¨ã€‚)"
suspect [ËˆsÊŒspÉ›kt] (n.),"ã€ä¸­æ–‡ã€‘å«Œç–‘çŠ¯
ã€è©æ€§è®ŠåŒ–ã€‘
- suspicion (n.)
ã€å­¸æ¸¬é»æ’¥ã€‘
- ä½œå‹•è©æ™‚è®€éŸ³ç‚º [sÉ™ËˆspÉ›kt]ã€‚
ã€ä¾‹å¥ã€‘
Detectives should consider everyone a suspect.
(åµæ¢æ‡‰è©²æŠŠæ¯å€‹äººéƒ½è¦–ç‚ºå«Œç–‘çŠ¯ã€‚)"
register [ËˆrÉ›dÊ’ÉªstÉš] (n.),"ã€ä¸­æ–‡ã€‘ç™»è¨˜ç°¿ã€åå†Š
ã€æ­é…è©ã€‘
- register for... (v. è¨»å†Šã€å ±å)
ã€ä¾‹å¥ã€‘
He flipped through the hotel register.
(ä»–ç¿»é–±äº†é£¯åº—ç™»è¨˜ç°¿ã€‚)"
muffled [ËˆmÊŒfÉ™ld] (adj.),"ã€ä¸­æ–‡ã€‘ï¼ˆè²éŸ³ï¼‰æ‚¶ä½çš„ã€è½ä¸æ¸…æ¥šçš„
ã€ä¾‹å¥ã€‘
The voice was muffled, but it was definitely yelling, 'HELP!'.
(é‚£è²éŸ³æ‚¶æ‚¶çš„ï¼Œä½†ç¢ºå¯¦æ˜¯åœ¨å–Šè‘—ã€Œæ•‘å‘½ï¼ã€ã€‚)"
dedicate [ËˆdÉ›dÉ™ËŒket] (v.),"ã€ä¸­æ–‡ã€‘ç»çµ¦ã€å¥‰ç»
ã€æ­é…è©ã€‘
- dedicate A to B
ã€å­¸æ¸¬é»æ’¥ã€‘
- dedicate A to B ä¸­çš„ to æ˜¯ä»‹ä¿‚è©ï¼Œå¾Œæ¥ N æˆ– V-ingã€‚
ã€ä¾‹å¥ã€‘
I'll dedicate my next book to my three new friends!
(æˆ‘æœƒæŠŠæˆ‘çš„ä¸‹ä¸€æœ¬æ›¸ç»çµ¦é€™ä¸‰ä½æ–°æœ‹å‹ï¼)"
fangs [fÃ¦Å‹z] (n.),"ã€ä¸­æ–‡ã€‘å°–ç‰™ã€çŠ¬é½’
ã€ä¾‹å¥ã€‘
Dink slipped the plastic fangs into his mouth.
(Dink å°‡å¡‘è† å°–ç‰™å¡é€²å˜´è£¡ã€‚)"
costume [ËˆkÉ‘stjum] (n.),"ã€ä¸­æ–‡ã€‘æœè£ã€æˆ²æœ
ã€ä¾‹å¥ã€‘
Wait till I put on the rest of my costume.
(ç­‰æˆ‘ç©¿ä¸Šå‰©ä¸‹çš„æœè£ã€‚)"
mustache [ËˆmÊŒstÃ¦Êƒ] (n.),"ã€ä¸­æ–‡ã€‘é¬é¬šã€å…«å­—é¬
ã€ä¾‹å¥ã€‘
He had dark curly hair, a droopy mustache.
(ä»–æœ‰ä¸€é ­é»‘è‰²æ²é«®ã€å‚ä¸‹çš„é¬é¬šã€‚)"
trampled [ËˆtrÃ¦mpÉ™ld] (v.),"ã€ä¸­æ–‡ã€‘è¸©è¸ã€è¸è¸
ã€å­¸æ¸¬é»æ’¥ã€‘
- å¸¸ç”¨æ–¼å½¢å®¹äººç¾¤æ¨æ“ æˆ–æŠ½è±¡çš„ã€Œè¸è¸æ¬Šåˆ©ã€ã€‚
ã€ä¾‹å¥ã€‘
Dink stood on the bench so he wouldn't get trampled.
(Dink ç«™åœ¨é•·æ¤…ä¸Šï¼Œä»¥å…è¢«è¸©è¸ã€‚)"
suspicious [sÉ™ËˆspÉªÊƒÉ™s] (adj.),"ã€ä¸­æ–‡ã€‘å¯ç–‘çš„
ã€æ­é…è©ã€‘
- be suspicious of...
ã€ä¾‹å¥ã€‘
We'd look pretty suspicious.
(æˆ‘å€‘æœƒçœ‹èµ·ä¾†ç›¸ç•¶å¯ç–‘ã€‚)"
persuade [pÉšËˆswed] (v.),"ã€ä¸­æ–‡ã€‘èªªæœ
ã€è©æ€§è®ŠåŒ–ã€‘
- persuasion (n.)
ã€æ­é…è©ã€‘
- persuade someone to V
ã€ä¾‹å¥ã€‘
Are you going to persuade him to give you the videotape?
(ä½ æ‰“ç®—å»èªªæœä»–æŠŠéŒ„å½±å¸¶äº¤çµ¦ä½ å—ï¼Ÿ)"
vigorously [ËˆvÉªÉ¡É™rÉ™sli] (adv.),"ã€ä¸­æ–‡ã€‘æœ‰åŠ›åœ°ã€åŠ‡çƒˆåœ°
ã€å­¸æ¸¬é»æ’¥ã€‘
- å½¢å®¹å‹•ä½œç¨‹åº¦ï¼Œå¦‚åŠ‡çƒˆæ–é ­ã€‚
ã€ä¾‹å¥ã€‘
Howard rubbed Dink's hair vigorously.
(Howard æœ‰åŠ›åœ°æ“æ‰è‘— Dink çš„é ­é«®ã€‚)"
beckoned [ËˆbÉ›kÉ™nd] (v.),"ã€ä¸­æ–‡ã€‘ï¼ˆæ‹›æ‰‹ï¼‰ç¤ºæ„ã€å¬å–š
ã€ä¾‹å¥ã€‘
Then he beckoned Dink, Josh, and Ruth Rose inside.
(æ¥è‘—ä»–ç¤ºæ„ Dinkã€Josh å’Œ Ruth Rose é€²åˆ°å±‹å…§ã€‚)"
recognized [ËˆrÉ›kÉ™É¡ËŒnaÉªzd] (v.),"ã€ä¸­æ–‡ã€‘èªå‡ºã€è¾¨èª
ã€è©æ€§è®ŠåŒ–ã€‘
- recognition (n.)
ã€ä¾‹å¥ã€‘
The kid who taped him might have recognized him.
(æ‹ä¸‹ä»–çš„é‚£å€‹å­©å­å¯èƒ½æœƒèªå‡ºä»–ã€‚)"
handcuffs [ËˆhÃ¦ndËŒkÊŒfs] (n.),"ã€ä¸­æ–‡ã€‘æ‰‹éŠ¬
ã€ä¾‹å¥ã€‘
He snapped handcuffs on the man's wrists.
(ä»–æŠŠæ‰‹éŠ¬å–€åš“ä¸€è²æ‰£åœ¨é‚£åç”·å­çš„æ‰‹è…•ä¸Šã€‚)"
burglarized [ËˆbÉÉ¡lÉ™ËŒraÉªzd] (v.),"ã€ä¸­æ–‡ã€‘é­ç«Šã€è¢«é—–ç©ºé–€
ã€ä¾‹å¥ã€‘
Two Green Lawn homes were burglarized last night.
(æ˜¨æ™šæœ‰å…©æˆ¶äººå®¶é­ç«Šã€‚)"
vanishing [ËˆvÃ¦nÉªÊƒÉªÅ‹] (v.),"ã€ä¸­æ–‡ã€‘æ¶ˆå¤±
ã€æ­é…è©ã€‘
- vanish into thin air
ã€ä¾‹å¥ã€‘
Two pets vanishing on the same day is just too weird!
(å…©éš»å¯µç‰©åœ¨åŒä¸€å¤©æ¶ˆå¤±ç°¡ç›´å¤ªè©­ç•°äº†ï¼)"
stray [stre] (adj.),"ã€ä¸­æ–‡ã€‘æµæµªçš„ã€è¿·è·¯çš„
ã€ä¾‹å¥ã€‘
People always bring her stray animals.
(äººå€‘ç¸½æ˜¯å¸¶æµæµªå‹•ç‰©å»å¥¹é‚£è£¡ã€‚)"
clothespin [ËˆklozËŒpÉªn] (n.),"ã€ä¸­æ–‡ã€‘æ›¬è¡£å¤¾
ã€ä¾‹å¥ã€‘
We always keep a clothespin on his door.
(æˆ‘å€‘ç¸½æ˜¯åœ¨ä»–çš„ç± é–€ä¸Šå¤¾ä¸€å€‹æ›¬è¡£å¤¾ã€‚)"
preen [prin] (v.),"ã€ä¸­æ–‡ã€‘ï¼ˆé³¥é¡ï¼‰æ•´ç†ç¾½æ¯›
ã€ä¾‹å¥ã€‘
Mozart settled down to preen his feathers.
(Mozart åœä¸‹ä¾†é–‹å§‹æ•´ç†ç¾½æ¯›ã€‚)"
pacing [ËˆpesÉªÅ‹] (v.),"ã€ä¸­æ–‡ã€‘è¸±æ­¥ã€ä¾†å›èµ°å‹•
ã€ä¾‹å¥ã€‘
Ruth Rose was pacing back and forth across the lawn.
(Ruth Rose åœ¨è‰åªä¸Šä¾†å›è¸±æ­¥ã€‚)"
camouflaged [ËˆkÃ¦mÉ™ËŒflÉ‘Ê’d] (adj.),"ã€ä¸­æ–‡ã€‘è¿·å½©çš„ã€å½è£çš„
ã€ä¾‹å¥ã€‘
Josh wore camouflage pants.
(Josh ç©¿è‘—è¿·å½©é•·è¤²ã€‚)"
snapped [snÃ¦pt] (v.),"ã€ä¸­æ–‡ã€‘æ‰£ä¸Šã€æŠ˜æ–·
ã€ä¾‹å¥ã€‘
He snapped handcuffs on the man's wrists.
(ä»–å°‡æ‰‹éŠ¬æ‰£åœ¨é‚£åç”·å­çš„æ‰‹è…•ä¸Šã€‚)"
terrified [ËˆtÉ›rÉ™ËŒfaÉªd] (adj.),"ã€ä¸­æ–‡ã€‘ææ‡¼çš„ã€å—é©šåš‡çš„
ã€è©æ€§è®ŠåŒ–ã€‘
- terrify (v.)
ã€æ­é…è©ã€‘
- be terrified of...
ã€ä¾‹å¥ã€‘
She yelled into Fred Little's terrified face.
(å¥¹å°è‘— Fred Little é‚£å¼µå……æ»¿ææ‡¼çš„è‡‰å¤§å¼ã€‚)"
perish [ËˆpÉ›rÉªÊƒ] (v.),"ã€ä¸­æ–‡ã€‘æ­»äº¡ã€æ¯è
ã€è©æ€§è®ŠåŒ–ã€‘
- perishable (adj. æ˜“è…å£çš„)
ã€ä¾‹å¥ã€‘
These children won't perish if they stay up a little longer.
(é€™äº›å­©å­å¦‚æœå†ç†¬å¤œä¸€æœƒå…’ä¹Ÿä¸æœƒç´¯å£çš„ã€‚)"
humongous [hjuËˆmÉ‘Å‹É¡É™s] (adj.),"ã€ä¸­æ–‡ã€‘å·¨å¤§çš„ã€é¾å¤§çš„
ã€ä¾‹å¥ã€‘
This place is humongous!
(é€™å€‹åœ°æ–¹çœŸæ˜¯é¾å¤§ï¼)"
chandelier [ËŒÊƒÃ¦ndÉ™ËˆlÉªr] (n.),"ã€ä¸­æ–‡ã€‘æ°´æ™¶åŠç‡ˆ
ã€ä¾‹å¥ã€‘
A black chandelier hung over the table.
(æ¡Œå­ä¸Šæ–¹æ‡¸æ›è‘—ä¸€ç›é»‘è‰²çš„æ°´æ™¶åŠç‡ˆã€‚)"
stumped [stÊŒmpt] (v.),"ã€ä¸­æ–‡ã€‘è¢«é›£ä½ã€é›£å€’
ã€ä¾‹å¥ã€‘
This is one mystery that's got me stumped!
(é€™æ˜¯ä¸€å€‹æŠŠæˆ‘é›£ä½äº†çš„ç¥ç¥•è¬åœ˜ï¼)"
miniature [ËˆmÉªnÉªÉ™ËŒtÊƒÊŠr] (adj.),"ã€ä¸­æ–‡ã€‘å¾®å‹çš„ã€å°å‹çš„
ã€ä¾‹å¥ã€‘
A shelf held a miniature set of blue dishes.
(æ¶å­ä¸Šæ”¾è‘—ä¸€å¥—å¾®å‹çš„è—è‰²é¤å…·ã€‚)"
endangered [ÉªnËˆdendÊ’Éšd] (adj.),"ã€ä¸­æ–‡ã€‘ç€•å±çš„
ã€æ­é…è©ã€‘
- endangered species
ã€å­¸æ¸¬é»æ’¥ã€‘
- å­¸æ¸¬è¶…é«˜é »å–®å­—ã€‚
ã€ä¾‹å¥ã€‘
I have a book about endangered birds.
(æˆ‘æœ‰ä¸€æœ¬é—œæ–¼ç€•å±é³¥é¡çš„æ›¸ã€‚)"
poachers [ËˆpotÊƒÉšz] (n.),"ã€ä¸­æ–‡ã€‘ç›œçµè€…
ã€ä¾‹å¥ã€‘
Poachers catch rare animals and sell them for a lot of money.
(ç›œçµè€…æ•æ‰ç¨€æœ‰å‹•ç‰©ä¸¦ä»¥é«˜åƒ¹è³£å‡ºã€‚)"
oozed [uzd] (v.),"ã€ä¸­æ–‡ã€‘æ»²å‡ºã€æµå‡º
ã€ä¾‹å¥ã€‘
The rock walls oozed, and the floor was under water.
(å²©å£æ»²å‡ºæ°´æ»´ï¼Œåœ°é¢å‰‡è¢«æ·¹æ²’åœ¨æ°´ä¸‹ã€‚)"
trapdoor [ËˆtrÃ¦pËŒdor] (n.),"ã€ä¸­æ–‡ã€‘æ´»æ¿é–€
ã€ä¾‹å¥ã€‘
Dink pointed to a trapdoor in the floor.
(Dink æŒ‡è‘—åœ°æ¿ä¸Šçš„ä¸€å€‹æ´»æ¿é–€ã€‚)"
hideous [ËˆhÉªdÉªÉ™s] (adj.),"ã€ä¸­æ–‡ã€‘æå…¶é†œé™‹çš„ã€å¯æ€•çš„
ã€ä¾‹å¥ã€‘
Up ahead, he heard a hideous scream.
(åœ¨å‰æ–¹ï¼Œä»–è½åˆ°äº†ä¸€è²å¯æ€•çš„å°–å«ã€‚)"
scrambled [ËˆskrÃ¦mbÉ™ld] (v.),"ã€ä¸­æ–‡ã€‘æ”€çˆ¬ã€çˆ­å…ˆæå¾Œ
ã€æ­é…è©ã€‘
- scramble for something (çˆ­å¥ªæŸç‰©)
ã€ä¾‹å¥ã€‘
They scrambled up Josh's rope ladder.
(ä»–å€‘æ²¿è‘— Josh çš„ç¹©æ¢¯çˆ¬é€²äº†é–£æ¨“ã€‚)"
abbreviation [É™ËŒbriviËˆeÊƒÉ™n] (n.),"ã€ä¸­æ–‡ã€‘ç¸®å¯«
ã€è©æ€§è®ŠåŒ–ã€‘
- abbreviate (v.)
ã€ä¾‹å¥ã€‘
Isn't CO the abbreviation for Colorado?
(CO ä¸æ˜¯ç§‘ç¾…æ‹‰å¤šå·çš„ç¸®å¯«å—ï¼Ÿ)"
invisible [ÉªnËˆvÉªzÉ™bl] (adj.),"ã€ä¸­æ–‡ã€‘éš±å½¢çš„ã€çœ‹ä¸è¦‹çš„
ã€è©æ€§è®ŠåŒ–ã€‘
- visible (adj. çœ‹å¾—è¦‹çš„)
- vision (n. è¦–è¦ºã€é è¦‹)
ã€å­¸æ¸¬é»æ’¥ã€‘
- å­—æ ¹ vis (çœ‹)ã€‚
ã€ä¾‹å¥ã€‘
Ruth Rose was practically invisible.
(Ruth Rose å¹¾ä¹æ˜¯éš±å½¢çš„ã€‚)"
cellophane [ËˆsÉ›lÉ™ËŒfen] (n.),"ã€ä¸­æ–‡ã€‘ç»ç’ƒç´™
ã€ä¾‹å¥ã€‘
Dink removed the cellophane.
(Dink æ’•æ‰äº†ç»ç’ƒç´™ã€‚)"
inverts [ÉªnËˆvÉts] (n.),"ã€ä¸­æ–‡ã€‘ï¼ˆéƒµç¥¨ï¼‰å€’å°ç¥¨
ã€è©æ€§è®ŠåŒ–ã€‘
- invert (v. å€’ç½®)
ã€ä¾‹å¥ã€‘
You mean inverts, she said.
(å¥¹èªªï¼Œå¦³æ˜¯æŒ‡å€’å°ç¥¨å§ã€‚)"
caption [ËˆkÃ¦pÊƒÉ™n] (n.),"ã€ä¸­æ–‡ã€‘æ¨™é¡Œã€èªªæ˜æ–‡å­—
ã€ä¾‹å¥ã€‘
The caption read: CURTISS JENNY...
(èªªæ˜æ–‡å­—å¯«è‘—ï¼šæŸ¯è’‚æ–¯çå¦®...)"
magnifying [ËˆmÃ¦É¡nÉ™ËŒfaÉªÉªÅ‹] (adj.),"ã€ä¸­æ–‡ã€‘æ”¾å¤§çš„
ã€è©æ€§è®ŠåŒ–ã€‘
- magnify (v. æ”¾å¤§)
ã€ä¾‹å¥ã€‘
He whipped out a magnifying glass.
(ä»–çŒ›åœ°æå‡ºäº†ä¸€å€‹æ”¾å¤§é¡ã€‚)"
smudged [smÊŒdÊ’d] (v.),"ã€ä¸­æ–‡ã€‘å¼„é«’ã€å¡—æ±¡
ã€ä¾‹å¥ã€‘
His fingers were smudged gray from ink.
(æ‰‹æŒ‡ä¹Ÿè¢«å¢¨æ°´å¼„é«’è®Šæˆäº†ç°è‰²ã€‚)"
associate [É™ËˆsoÊƒÉªËŒet] (n.),"ã€ä¸­æ–‡ã€‘å¤¥ä¼´ã€åŒäº‹
ã€æ­é…è©ã€‘
- associate A with B (v. æŠŠ A èˆ‡ B è¯æƒ³åœ¨ä¸€èµ·)
ã€ä¾‹å¥ã€‘
This is my associate, Doris Duncan said.
(Doris Duncan èªªï¼Œé€™æ˜¯æˆ‘çš„å¤¥ä¼´ã€‚)"
commotion [kÉ™ËˆmoÊƒÉ™n] (n.),"ã€ä¸­æ–‡ã€‘é¨·å‹•ã€æ··äº‚
ã€æ­é…è©ã€‘
- cause a commotion
ã€ä¾‹å¥ã€‘
All this commotion over a tiny piece of paper!
(ç‚ºäº†é€™éº¼ä¸€å°å¼µç´™ç«Ÿç„¶å¼•èµ·é€™éº¼å¤§çš„é¨·å‹•ï¼)"
moisture [ËˆmÉ”ÉªstÊƒÉš] (n.),"ã€ä¸­æ–‡ã€‘æ¿•æ°£ã€æ°´åˆ†
ã€è©æ€§è®ŠåŒ–ã€‘
- moisturize (v. ä¿æ¿•)
- moisturizer (n. ä¿æ¿•ä¹³æ¶²)
ã€ä¾‹å¥ã€‘
Moisture began gathering on the stamps.
(éƒµç¥¨ä¸Šé–‹å§‹èšé›†æ¿•æ°£ã€‚)"`;

let cards = [];
let currentIndex = 0;
let isFlipped = false;
const synth = window.speechSynthesis;
let voices = [];
let currentUtterance = null;

function parseCSV(text) {
    let rows = [];
    let currentRow = [];
    let curVal = '';
    let insideQuote = false;

    for (let i = 0; i < text.length; i++) {
        let char = text[i];
        let nextChar = text[i+1];

        if (char === '"') {
            if (insideQuote && nextChar === '"') {
                curVal += '"';
                i++;
            } else {
                insideQuote = !insideQuote;
            }
        } else if (char === ',' && !insideQuote) {
            currentRow.push(curVal.trim());
            curVal = '';
        } else if ((char === '\r' || char === '\n') && !insideQuote) {
            if (curVal || currentRow.length > 0) {
                currentRow.push(curVal.trim());
                rows.push(currentRow);
                currentRow = [];
                curVal = '';
            }
        } else {
            curVal += char;
        }
    }
    if (curVal || currentRow.length > 0) {
        currentRow.push(curVal.trim());
        rows.push(currentRow);
    }
    return rows;
}

function processData(rawRows) {
    let processed = [];
    rawRows = rawRows.filter(row => row.length >= 2);

    rawRows.forEach(row => {
        const frontRaw = row[0];
        const backRaw = row[1];

        const frontRegex = /^(.+?)\s+(\[.+?\])\s*(\(.*\))$/; 
        const match = frontRaw.match(frontRegex);
        
        let word = frontRaw;
        let ipa = "";
        let pos = "";

        if (match) {
            word = match[1].trim();
            ipa = match[2].trim();
            pos = match[3].trim();
        } else {
            const parts = frontRaw.split('[');
            if (parts.length > 1) {
                word = parts[0].trim();
                ipa = '[' + parts[1].split(']')[0] + ']';
                const posParts = frontRaw.split(')'); 
            }
        }

        let exampleSentence = "";
        const lines = backRaw.split('\n');
        let foundExample = false;
        let htmlParts = [];
        
        for (let i = 0; i < lines.length; i++) {
            let line = lines[i].trim();
            if (!line) continue;

            if (line.includes('ã€')) {
                line = line.replace(/ã€(.*?)ã€‘/, '<span class="tag-header">ã€$1ã€‘</span>');
                htmlParts.push(line);
                if (line.includes('ä¾‹å¥')) foundExample = true;
                else foundExample = false;
            } else {
                if (foundExample && !line.startsWith('(') && !line.includes('ï¼ˆ')) {
                    exampleSentence = line;
                    htmlParts.push(`
                        <div class="example-block">
                            ${line}
                            <button class="btn-speak-sentence" onclick="speakExample(event, '${escapeStr(line)}')">ğŸ”Š</button>
                        </div>
                    `);
                } else {
                    htmlParts.push(`<div>${line}</div>`);
                }
            }
        }

        processed.push({
            word,
            ipa,
            pos,
            backHTML: htmlParts.join(''),
            exampleSentence
        });
    });

    return processed;
}

function init() {
    const rawData = parseCSV(csvData);
    cards = processData(rawData);
    
    loadVoices();
    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = loadVoices;
    }

    renderCard(currentIndex);
    updateProgress();

    document.getElementById('flashcard').addEventListener('click', flipCard);
    document.getElementById('prev-btn').addEventListener('click', prevCard);
    document.getElementById('next-btn').addEventListener('click', nextCard);
    
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') nextCard();
        if (e.key === 'ArrowLeft') prevCard();
        if (e.key === ' ' || e.key === 'Enter') flipCard();
    });

    document.getElementById('btn-speak-word').addEventListener('click', (e) => {
        e.stopPropagation();
        speak(cards[currentIndex].word);
    });
}

function loadVoices() {
    voices = synth.getVoices();
}

function renderCard(index) {
    const card = cards[index];
    
    document.getElementById('front-word').textContent = card.word;
    document.getElementById('front-ipa').textContent = card.ipa;
    document.getElementById('front-pos').textContent = card.pos;
    document.getElementById('back-content').innerHTML = card.backHTML;

    const cardEl = document.getElementById('flashcard');
    cardEl.classList.remove('is-flipped');
    isFlipped = false;
}

function escapeStr(str) {
    return str.replace(/'/g, "\\'").replace(/"/g, '&quot;');
}

window.speakExample = function(event, text) {
    event.stopPropagation();
    speak(text);
}

function flipCard() {
    const card = document.getElementById('flashcard');
    card.classList.toggle('is-flipped');
    isFlipped = !isFlipped;
}

function nextCard() {
    if (currentIndex < cards.length - 1) {
        currentIndex++;
        renderCard(currentIndex);
        updateProgress();
    }
}

function prevCard() {
    if (currentIndex > 0) {
        currentIndex--;
        renderCard(currentIndex);
        updateProgress();
    }
}

function updateProgress() {
    document.getElementById('progress-text').textContent = `${currentIndex + 1} / ${cards.length}`;
}

// æœ€çµ‚ä¿®æ­£ç‰ˆï¼šé›¶å»¶é² + é˜²æ­¢éŸ³é ­åˆ‡æ–·
function speak(text) {
    // 1. å¼·åˆ¶é‡ç½® (è§£æ±º Chrome å¶çˆ¾ç™¼éŸ³å¡ä½çš„å•é¡Œ)
    if (synth.speaking) {
        synth.cancel();
    }
    
    // 2. æŠ€å·§ï¼šå‰æ–¹åŠ ç©ºç™½(é˜²åˆ‡é ­)ï¼Œå¾Œæ–¹åŠ å¥é»(é˜²åˆ‡å°¾)
    // é€™è£¡æˆ‘å€‘ä¸å†ä½¿ç”¨ setTimeoutï¼Œè€Œæ˜¯ä¾è³´é€™å€‹"ç©ºç™½å­—å…ƒ"è¢«è™•ç†çš„æ™‚é–“å·®
    // ä¾†é”åˆ°ç¡¬é«”æš–æ©Ÿçš„æ•ˆæœï¼ŒåŒæ™‚ä¸ç”¢ç”Ÿäººé¡å¯æ„ŸçŸ¥çš„å»¶é²ã€‚
    const textToSpeak = " " + text + ".";

    currentUtterance = new SpeechSynthesisUtterance(textToSpeak);
    currentUtterance.rate = 0.85; 
    currentUtterance.lang = 'en-US';

    const preferredVoices = voices.filter(v => 
        (v.name.includes('Google') && v.lang.includes('en-US')) || 
        (v.name.includes('Samantha')) ||
        (v.lang.includes('en') && v.localService)
    );

    if (preferredVoices.length > 0) {
        currentUtterance.voice = preferredVoices[0];
    }

    // 3. ç«‹å³æ’­æ”¾ï¼Œç„¡è¨ˆæ™‚å™¨
    synth.speak(currentUtterance);
}

init();

</script>
</body>
</html>